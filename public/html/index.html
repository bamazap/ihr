<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.0.0/react.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.0.0/react-dom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.6/zepto.min.js"></script>
<script src="../../vendor/lib/php_crud_api_transform.js"></script>
<script>
var FreshmenList = React.createClass({
  displayName: 'FreshmenList',
  url: '/api.php/freshmen',
  getInitialState: function() {
    return { freshmen: [] };
  },
  retrieveServerState: function() {
    this.serverRequest = $.get(this.url, function (data) {
      this.setState(php_crud_api_transform(data));
    }.bind(this));
  },
  componentDidMount: function() {
    $.post(this.url, {firstname: "Ben", lastname: "Bitdiddle"}, this.retrieveServerState);
  },
  componentWillUnmount: function() {
    this.serverRequest.abort();
  },
  render: function render() {
    var createFreshman = function(freshman) {
      return React.createElement(
        'li',
        {key: freshman.id},
        freshman.lastname,
        ', ',
        freshman.firstname
      );
    };
    return React.createElement(
      'ul',
      null,
      this.state.freshmen.map(createFreshman)
    );
  }
});
$(function(){ ReactDOM.render(React.createElement(FreshmenList, null), document.getElementById('myApplication')); });
</script>
</head>
<body>
<div id="myApplication">Loading...</div>
</body>
</html>
